---
title: Apache Kafka® MirrorMaker 2 log analysis using the offset sync tool
sidebar_label: Offset sync log analysis
---

Learn how to analyze key log messages generated during data synchronization with Apache Kafka® MirrorMaker 2.
These logs are produced by the offset sync inspection tool, which you can run locally
after setting up the required environment to review offset syncing between source and
target Apache Kafka topics.

## Prerequisites

Before you download and run the tool, ensure you have the following:

- Basic understanding of Kafka shell tools.
- A valid Apache Kafka MirrorMaker 2 configuration file with the necessary source and
  target cluster connectivity fields.

## Accessing the offset sync inspection tool

Download and run the **offset sync inspection tool** to analyze offset syncing in
MirrorMaker 2:

- [Download the offset sync inspection tool](https://github.com/aiven/kafka/releases/tag/mm2-offset-sync-inspector-0.1)

## Running the tool

The offset sync inspection tool outputs logs in CSV format. Use the logs to check the
sync status and detect any issues with the offset syncing process.

### Example command

Run the tool using the following command:

```bash
<extracted tgz>/bin/kafka-mirrormaker-offset-sync-inspector.sh --mm2-config <path-to-config-file>
```

Parameter:

- `--mm2-config <path-to-config-file>`: Specifies the path to the MirrorMaker 2
  configuration file. This file contains the connection details for the source and
  target Apache Kafka clusters.

To view all available options, run the help command:

```bash
./bin/kafka-mirrormaker-offset-sync-inspector.sh --help
```

## Understanding log messages and actions

Below are common log messages generated by the tool, what they mean, and recommended
actions. If any issues arise, [create a support ticket](/docs/platform/howto/support) or
email [Aiven Support](mailto:support@aiven.io).

| Message ID | Script message | What it means | Customer action | How to inspect | How to analyze inspection | Issue with Apache Kafka or MirrorMaker 2 |
|------------|----------------|---------------|-------------------|----------------|----------------------------|-----------------------------------------|
| 1 | Successfully synced, operating normally | Data and offsets are properly migrated. Consumers will start consuming from the synced offsets with minimal redelivery. | No action required | Not required | Not required | No |
| 2 | Intentionally not synced because the source partition is empty. Other partitions in this group are synced. | The source partition has no data, and MirrorMaker does not sync these. Consumers will start consuming from the beginning when new data arrives. | No action required | Not required | Not required | No |
| 3 | Intentionally not synced because the source partition is empty. Other partitions in this group are not synced. | The source partition has no data, and MirrorMaker does not sync these. Consumers will start consuming from the beginning when new data arrives. | No action required | Not required | Not required | No |
| 4 | Intentionally not synced because the source group is too old. Other partitions in this group are synced. | The source partition has data, but it is newer than the committed offset for the consumer group. Consumers will start consuming from the beginning when new data arrives. | No action required | Not required | Not required | No |
| 5 | Intentionally not synced because the source group is too old. Other partitions in this group are not synced. | The source partition has data, but it is newer than the committed offset for the consumer group. Consumers will start consuming from the beginning when new data arrives. | No action required | Not required | Not required | No |
| 6 | Erroneously not synced. Source partition has data, and other partitions for this group are synced. | There may be an issue with offset syncing. Consumers will start consuming from the beginning when new data arrives. | [Create a support ticket](/docs/platform/howto/support) or email [Aiven Support](mailto:support@aiven.io). | Use `kafka-get-offsets` to inspect source topic or CSV output. Compare earliest and latest offsets. | Investigate potential offset syncing issues. | Yes |
| 7 | Erroneously not synced. Source partition has data, and other partitions for this group are not synced. | There may be a systematic failure affecting all partitions in this topic. Consumers will start from the beginning when new data arrives. | [Create a support ticket](/docs/platform/howto/support) or email [Aiven Support](mailto:support@aiven.io). | Use diagnostic tools to analyze per-partition sync issues. | Investigate potential sync failure across all partitions. | Yes |
