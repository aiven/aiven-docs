---
title: Apache Kafka® MirrorMaker 2 log analysis using the offset sync tool
sidebar_label: Offset sync log analysis
---

Analyze key log messages during data synchronization with Apache Kafka® MirrorMaker 2 using Aiven’s offset sync inspection tool.
This tool tracks the progress of synchronization between source and destination clusters.
You can run it locally after setting up the required environment to review offset
syncing between source and target Apache Kafka topics. The tool generates messages
that indicate partition health and highlight when intervention is needed, making it
particularly useful during large data migrations.

## Prerequisites

Before you download and run the tool, ensure you have the following:

- Basic understanding of Kafka shell tools.
- A valid Apache Kafka MirrorMaker 2 configuration file with the necessary source and
  target cluster connectivity fields.

## Download the offset sync inspection tool

Download and run the **offset sync inspection tool** to analyze offset syncing in
MirrorMaker 2:

- [Download the offset sync inspection tool](https://github.com/aiven/kafka/releases/tag/mm2-offset-sync-inspector-0.1)

## Run the tool

The offset sync inspection tool outputs data in CSV format. Use this output to check
the sync status and detect any issues with the offset syncing process.

### Example command

Run the tool using the following command:

```bash
<extracted tgz>/bin/kafka-mirrormaker-offset-sync-inspector.sh --mm2-config <path-to-config-file>
```

Parameter:

- `--mm2-config <path-to-config-file>`: Specifies the path to the MirrorMaker 2
  configuration file. This file contains the connection details for the source and
  target Apache Kafka clusters.

To view all available options, run the help command:

```bash
./bin/kafka-mirrormaker-offset-sync-inspector.sh --help
```

## Log messages and actions

Below are common log messages generated by the tool, what they mean, and recommended
actions. If any issues arise, [create a support ticket](/docs/platform/howto/support) or
email [Aiven Support](mailto:support@aiven.io).

| Sync status message | Description | Action required | Inspect | Analyze |
|---------------------|-------------|-----------------|---------|---------|
| Successfully synced, operating normally. | Data and offsets are successfully migrated, allowing consumers to read from synced offsets with minimal redelivery. | No action required. | None. | None. |
| Intentionally not synced because the source partition is empty. Other partitions in this group are synced. | The source partition has no data, so MirrorMaker 2 skips syncing it. Consumers start from the beginning when new data arrives. | No action required. | None. | None. |
| Intentionally not synced because the source partition is empty. Other partitions in this group are not synced. | The source partition has no data, so MirrorMaker 2 skips syncing it. Consumers start from the beginning when new data arrives. | No action required. | None. | None. |
| Intentionally not synced because the source group is too old. Other partitions in this group are synced. | The source partition has newer data than the committed offset for the consumer group. Consumers start from the beginning when new data arrives. | No action required. | None. | None. |
| Erroneously not synced. Source partition has data, and other partitions for this group are synced. | There is an offset syncing issue. Consumers start from the beginning when new data arrives. | [Create a support ticket](/docs/platform/howto/support). | - Use `kafka-get-offsets` to compare the earliest and latest offsets in source and target topics.<br /> - Check the source partition's throughput on the Apache Kafka dashboard.<br /> - Inspect offset syncs in `kafka-console-consumer` to locate the topic-partition key.<br /> - Enable TRACE logging for OffsetSyncStore in MirrorMaker 2. | - The partition has little or no data, causing dropped syncs.<br /> - Zero throughput prevents syncs from being generated.<br /> - Verify if MirrorSourceTask isn’t emitting syncs or if MirrorCheckpointTask is expiring them. |
| Erroneously not synced. Source partition has data, and other partitions for this group are not synced. | There is a systematic failure affecting all partitions in this topic. Consumers start from the beginning when new data arrives. | [Create a support ticket](/docs/platform/howto/support). | - Run per-partition diagnostics and compare offsets.<br /> - Use `kafka-get-offsets` and inspect sync activity logs. | Investigate sync failures across partitions. |
